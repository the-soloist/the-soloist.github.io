<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
<meta name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">

    <meta name="author" content="Th3S">





<title>Th3S&#39;s Blog</title>



    <link rel="icon" href="../image/favicon.ico">




    <!-- stylesheets list from _config.yml -->
    
    <link rel="stylesheet" href="../css/style.css">
    



    <!-- scripts list from _config.yml -->
    
    <script src="../js/script.js"></script>
    
    <script src="../js/tocbot.min.js"></script>
    



    
    
        
    


<meta name="generator" content="Hexo 8.0.0"><link rel="alternate" href="atom.xml" title="Th3S's Blog" type="application/atom+xml">
</head>

<body>
    <script>
        // this function is used to check current theme before page loaded.
        (() => {
            const pagebody = document.getElementsByTagName('body')[0]

            function setTheme(status) {

                if (status === 'dark') {
                    window.sessionStorage.theme = 'dark'
                    pagebody.classList.add('dark-theme');

                } else if (status === 'light') {
                    window.sessionStorage.theme = 'light'
                    pagebody.classList.remove('dark-theme');
                }
            };

            setTheme(window.sessionStorage.theme)
        })();
    </script>

    <div class="wrapper">
        <header>
    <nav class="navbar">
        <div class="container">
            <div class="navbar-header header-logo"><a href="/">Th3S&#39;s Blog</a></div>
            <div class="menu navbar-right">
                
                <a class="menu-item" href="../archive">Posts</a>
                
                <a class="menu-item" href="../category">Categories</a>
                
                <a class="menu-item" href="../tag">Tags</a>
                
                <a class="menu-item" href="../tool">Tools</a>
                
                <a class="menu-item" href="../about">About</a>
                
                <a class="menu-item" href="../search">Search</a>
                
                
                <input id="switch_default" type="checkbox" class="switch_default">
                <label for="switch_default" class="toggleBtn"></label>
            </div>
        </div>
    </nav>

    
    <nav class="navbar-mobile" id="nav-mobile">
        <div class="container">
            <div class="navbar-header">
                <div>
                    <a href="/">Th3S&#39;s Blog</a><a id="mobile-toggle-theme">·&nbsp;Light</a>
                </div>
                <div class="menu-toggle" onclick="mobileBtn()">
                    <svg class="menu-icon" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" d="M4.5 17.27q-.213 0-.356-.145T4 16.768t.144-.356t.356-.143h15q.213 0 .356.144q.144.144.144.357t-.144.356t-.356.143zm0-4.77q-.213 0-.356-.144T4 11.999t.144-.356t.356-.143h15q.213 0 .356.144t.144.357t-.144.356t-.356.143zm0-4.77q-.213 0-.356-.143Q4 7.443 4 7.23t.144-.356t.356-.143h15q.213 0 .356.144T20 7.23t-.144.356t-.356.144z"/></svg>
                    <svg class="close-icon" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><!-- Icon from Material Symbols Light by Google - https://github.com/google/material-design-icons/blob/master/LICENSE --><path fill="currentColor" d="m12 12.708l-5.246 5.246q-.14.14-.344.15t-.364-.15t-.16-.354t.16-.354L11.292 12L6.046 6.754q-.14-.14-.15-.344t.15-.364t.354-.16t.354.16L12 11.292l5.246-5.246q.14-.14.345-.15q.203-.01.363.15t.16.354t-.16.354L12.708 12l5.246 5.246q.14.14.15.345q.01.203-.15.363t-.354.16t-.354-.16z"/></svg>
                </div>
            </div>
            <div class="menu" id="mobile-menu">
                
                <a class="menu-item" href="../archive">Posts</a>
                
                <a class="menu-item" href="../category">Categories</a>
                
                <a class="menu-item" href="../tag">Tags</a>
                
                <a class="menu-item" href="../tool">Tools</a>
                
                <a class="menu-item" href="../about">About</a>
                
                <a class="menu-item" href="../search">Search</a>
                
            </div>
        </div>
    </nav>

</header>
<script>
    var mobileBtn = function f() {
        var toggleMenu = document.getElementsByClassName("menu-toggle")[0];
        var mobileMenu = document.getElementById("mobile-menu");
        if (toggleMenu.classList.contains("active")) {
            toggleMenu.classList.remove("active")
            mobileMenu.classList.remove("active")
        } else {
            toggleMenu.classList.add("active")
            mobileMenu.classList.add("active")
        }
    }
</script>
            <div class="main">
                <div class="container">
    <article class="post-wrap page">
        
        <h2 class="post-title"></h2>
        
        <section class="post-content">
            <!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>站内搜索</title>
    <style>
      :root {
        --bg: #b0e0e6;
        --text: #161209;
        --muted: #87878d;
        --border: #e0e0e0;
        --accent: #2d96bd;
        --shadow: 0 6px 18px rgba(0, 0, 0, 0.08);
      }
      .search {
        padding: 0;
      }
      .card {
        background: #fff;
        border-radius: 16px;
        /* padding: 24px; */
        box-shadow: var(--shadow);
        border: 1px solid #e9ecef;
      }
      form {
        position: relative;
        display: flex;
        align-items: center;
      }
      .input-wrap {
        position: relative;
        flex: 1;
      }
      input[type='text'] {
        width: 95%;
        height: 48px;
        border: 1px solid var(--border);
        border-radius: 10px;
        padding: 0 0px 0 5%;
        background: #fff;
        transition: box-shadow 0.2s, border-color 0.2s;
      }
      input[type='text']:focus {
        border-color: var(--accent);
        outline: none;
        box-shadow: 0 0 0 3px rgba(45, 150, 189, 0.15);
      }
      .search-icon {
        position: absolute;
        left: 12px;
        top: 50%;
        transform: translateY(-50%);
        color: var(--muted);
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .clear-btn {
        position: absolute;
        right: 44px;
        top: 50%;
        transform: translateY(-50%);
        height: 28px;
        width: 28px;
        border-radius: 6px;
        border: none;
        cursor: pointer;
        background: transparent;
        color: var(--muted);
      }
      .clear-btn:hover {
        color: #666;
      }
      .submit-btn {
        position: absolute;
        right: 8px;
        top: 50%;
        transform: translateY(-50%);
        height: 32px;
        width: 32px;
        border-radius: 8px;
        background: var(--accent);
        color: #fff;
        display: flex;
        align-items: center;
        justify-content: center;
        border: none;
        cursor: pointer;
      }
      .submit-btn svg {
        width: 16px;
        height: 16px;
      }
      .suggestions {
        position: absolute;
        top: 100%;
        left: 0;
        right: 0;
        background: #fff;
        border: 1px solid var(--border);
        border-top: none;
        border-radius: 0 0 10px 10px;
        box-shadow: var(--shadow);
        display: none;
        z-index: 10;
      }
      .suggestions.show {
        display: block;
      }
      .suggestion-item {
        padding: 10px 20px;
        cursor: pointer;
      }
      .suggestion-item:hover,
      .suggestion-item.selected {
        background: #f0f0f0;
        color: var(--accent);
      }
      .hint {
        font-size: 12px;
        color: var(--muted);
        margin-top: 10px;
      }
      .sr-only {
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0, 0, 0, 0);
        border: 0;
      }

      @media (max-width: 480px) {
        #container {
          padding: 16px;
        }
        input[type='text'] {
          height: 44px;
          padding: 0 80px 0 38px;
        }
        .clear-btn {
          right: 42px;
        }
      }
    </style>
  </head>
  <body>
    <div id="container">
      <div class="search">
        <div class="card">
          <form id="searchForm" autocomplete="off">
            <label for="search_key" class="sr-only">搜索内容</label>
            <div class="input-wrap">
              <span class="search-icon" aria-hidden="true">
                <svg viewBox="0 0 24 24" width="18" height="18">
                  <path
                    d="M15.5 14h-.79l-.28-.27a6.5 6.5 0 10-.7.7l.27.28v.79l5 4.99L20.49 19l-4.99-5zM10.5 15a4.5 4.5 0 110-9 4.5 4.5 0 010 9z"
                    fill="currentColor"
                  />
                </svg>
              </span>
              <input type="text" placeholder="请输入您要搜索的内容 …" id="search_key" aria-label="搜索内容" value="" />
              <button type="button" id="clear_btn" class="clear-btn" aria-label="清空搜索" title="清空">✕</button>
              <button type="submit" id="search_btn" class="submit-btn" aria-label="执行搜索" title="搜索">
                <svg viewBox="0 0 24 24" focusable="false" aria-hidden="true">
                  <path
                    d="M15.5 14h-.79l-.28-.27a6.5 6.5 0 10-.7.7l.27.28v.79l5 4.99L20.49 19l-4.99-5zM10.5 15a4.5 4.5 0 110-9 4.5 4.5 0 010 9z"
                    fill="currentColor"
                  />
                </svg>
              </button>
              <div id="suggestions" class="suggestions"></div>
            </div>
          </form>
        </div>
      </div>
    </div>

    <script>
      ;(function () {
        var form = document.getElementById('searchForm')
        var input = document.getElementById('search_key')
        var clearBtn = document.getElementById('clear_btn')
        var suggestions = document.getElementById('suggestions')

        // 防抖定时器和当前请求标识
        var debounceTimer = null
        var currentCallbackName = null
        var requestCounter = 0
        var selectedIndex = -1 // 当前选中的建议索引

        // 防抖函数
        function debounce(func, delay) {
          return function () {
            var context = this
            var args = arguments
            clearTimeout(debounceTimer)
            debounceTimer = setTimeout(function () {
              func.apply(context, args)
            }, delay)
          }
        }

        // 清空建议列表
        function clearSuggestions() {
          suggestions.classList.remove('show')
          suggestions.innerHTML = ''
          selectedIndex = -1 // 重置选中索引
        }

        // 清空输入框和建议
        function clearInput() {
          input.value = ''
          clearSuggestions()
          input.focus()
        }

        // 更新选中状态的显示
        function updateSelection() {
          var items = suggestions.querySelectorAll('.suggestion-item')
          items.forEach(function (item, index) {
            if (index === selectedIndex) {
              item.classList.add('selected')
            } else {
              item.classList.remove('selected')
            }
          })
        }

        // 选择上一个建议
        function selectPrevious() {
          var items = suggestions.querySelectorAll('.suggestion-item')
          if (items.length === 0) return

          selectedIndex = selectedIndex <= 0 ? items.length - 1 : selectedIndex - 1
          updateSelection()
        }

        // 选择下一个建议
        function selectNext() {
          var items = suggestions.querySelectorAll('.suggestion-item')
          if (items.length === 0) return

          selectedIndex = selectedIndex >= items.length - 1 ? 0 : selectedIndex + 1
          updateSelection()
        }

        // 获取当前选中的建议文本
        function getSelectedSuggestion() {
          var items = suggestions.querySelectorAll('.suggestion-item')
          if (selectedIndex >= 0 && selectedIndex < items.length) {
            return items[selectedIndex].textContent
          }
          return null
        }

        // 获取搜索建议
        function fetchSuggestions(query) {
          if (!query) {
            clearSuggestions()
            return
          }

          // 清理之前的回调函数
          if (currentCallbackName && window[currentCallbackName]) {
            try {
              delete window[currentCallbackName]
            } catch (e) {
              window[currentCallbackName] = undefined
            }
          }

          // 生成唯一的回调函数名
          requestCounter++
          currentCallbackName = 'handleSuggestions_' + requestCounter

          // 创建回调函数
          window[currentCallbackName] = function (data) {
            try {
              var list = data && data[1]
              if (list && Array.isArray(list) && list.length > 0) {
                var html = ''
                list.forEach(function (item) {
                  if (item && typeof item === 'string') {
                    // 转义HTML特殊字符
                    var escapedItem = item.replace(/[&<>"']/g, function (match) {
                      var escapeMap = {
                        '&': '&amp;',
                        '<': '&lt;',
                        '>': '&gt;',
                        '"': '&quot;',
                        "'": '&#39;',
                      }
                      return escapeMap[match]
                    })
                    html += '<div class="suggestion-item">' + escapedItem + '</div>'
                  }
                })
                suggestions.innerHTML = html
                suggestions.classList.add('show')
                selectedIndex = -1 // 重置选中索引
              } else {
                clearSuggestions()
              }
            } catch (error) {
              console.warn('处理搜索建议时出错:', error)
              clearSuggestions()
            }

            // 清理回调函数
            try {
              delete window[currentCallbackName]
            } catch (e) {
              window[currentCallbackName] = undefined
            }
            currentCallbackName = null
          }

          // 创建并执行JSONP请求
          try {
            var script = document.createElement('script')
            script.src =
              'https://suggestqueries.google.com/complete/search?client=firefox&q=' +
              encodeURIComponent(query) +
              '&callback=' +
              currentCallbackName
            script.onerror = function () {
              console.warn('搜索建议请求失败')
              clearSuggestions()
              if (currentCallbackName && window[currentCallbackName]) {
                try {
                  delete window[currentCallbackName]
                } catch (e) {
                  window[currentCallbackName] = undefined
                }
                currentCallbackName = null
              }
            }
            document.head.appendChild(script)
            // 延迟移除script标签，确保请求完成
            setTimeout(function () {
              if (script.parentNode) {
                script.parentNode.removeChild(script)
              }
            }, 1000)
          } catch (error) {
            console.warn('创建搜索建议请求时出错:', error)
            clearSuggestions()
          }
        }

        // 防抖的搜索建议函数
        var debouncedFetchSuggestions = debounce(fetchSuggestions, 300)

        // 事件监听器
        clearBtn.addEventListener('click', clearInput)

        input.addEventListener('input', function () {
          var q = input.value.trim()
          debouncedFetchSuggestions(q)
        })

        suggestions.addEventListener('click', function (e) {
          if (e.target.classList.contains('suggestion-item')) {
            input.value = e.target.textContent
            clearSuggestions()
            form.dispatchEvent(new Event('submit'))
          }
        })

        document.addEventListener('click', function (e) {
          if (!form.contains(e.target)) {
            clearSuggestions()
          }
        })

        // 键盘事件处理
        input.addEventListener('keydown', function (e) {
          if (e.key === 'Escape') {
            clearInput()
          } else if (e.key === 'ArrowUp') {
            e.preventDefault() // 防止光标移动
            selectPrevious()
          } else if (e.key === 'ArrowDown') {
            e.preventDefault() // 防止光标移动
            selectNext()
          } else if (e.key === 'Enter') {
            e.preventDefault() // 防止表单提交
            var selectedText = getSelectedSuggestion()
            if (selectedText) {
              // 如果有选中的建议，使用选中的文本进行搜索
              input.value = selectedText
              clearSuggestions()
              performSearch(selectedText)
            } else {
              // 如果没有选中的建议，使用输入框的内容进行搜索
              var query = input.value.trim()
              if (query) {
                clearSuggestions()
                performSearch(query)
              }
            }
          }
        })

        // 快捷键：Ctrl/⌘+K 聚焦；Esc 清空
        window.addEventListener('keydown', function (e) {
          var isMac = navigator.platform.toUpperCase().indexOf('MAC') >= 0
          if ((isMac ? e.metaKey : e.ctrlKey) && e.key.toLowerCase() === 'k') {
            e.preventDefault()
            input.focus()
          }
        })

        // 执行搜索的函数
        function performSearch(query) {
          if (!query) {
            input.focus()
            return
          }
          var encoded = encodeURIComponent(query + ' site:the-soloist.github.io')
          var url = 'https://www.google.com/search?q=' + encoded
          window.open(url, '_blank', 'noopener')
        }

        form.addEventListener('submit', function (e) {
          e.preventDefault()
          var q = (input.value || '').trim()
          performSearch(q)
        })

        // 页面卸载时清理
        window.addEventListener('beforeunload', function () {
          if (currentCallbackName && window[currentCallbackName]) {
            try {
              delete window[currentCallbackName]
            } catch (e) {
              window[currentCallbackName] = undefined
            }
          }
        })
      })()
    </script>
  </body>
</html>

        </section>
    </article>
</div>

            </div>
            <footer id="footer" class="footer">
    <div class="copyright">
        <span>© Th3S | Powered by <a href="https://hexo.io" target="_blank">Hexo</a> & <a href="https://github.com/Siricee/hexo-theme-Chic" target="_blank">Chic</a></span>
    </div>
</footer>

    </div>
</body>

</html>